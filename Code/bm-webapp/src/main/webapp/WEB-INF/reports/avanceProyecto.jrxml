<?xml version="1.0" encoding="UTF-8"?>
<!-- * ***********************************************************************
 *   Copyright (c) 2010 BIPOLAR
 *   Confidential and Proprietary
 *   All Rights Reserved
 *
 * @(#)$Id: avanceProyecto.jrxml 381 2010-11-27 16:38:35Z inzunzo $
 * Last Revised By   : $Author: inzunzo $
 * Last Checked In   : $Date: 2010-11-27 10:38:35 -0600 (Sat, 27 Nov 2010) $
 * Last Version      : $Revision: 381 $
 *
 * Original Author   : Humberto Garcia
 * Notes             :
 * *********************************************************************** -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="avanceProyecto" pageWidth="1440" pageHeight="2000" orientation="Landscape" columnWidth="1400" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" isIgnorePagination="true">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
    <parameter name="project_id" class="java.lang.Integer"/>
    <queryString language="SQL"><![CDATA[select t.TASKID, t.TASKNAME, t.ESTIMATEDHOURS as ESTIMATED, t.INVESTEDHOURS as INVESTED,
t.REMAININGHOURS as REMAINING from app.task as t, app.project as p
where t.PROJECT_PROJECTID = $P{project_id} and (t.TASKSTATE = 1 or t.TASKSTATE = 0) and t.PROJECT_PROJECTID = p.PROJECTID
order by t.TASKID]]></queryString>
	<field name="TASKID" class="java.lang.Integer"/>
	<field name="TASKNAME" class="java.lang.String"/>
	<field name="ESTIMATED" class="java.lang.Integer"/>
	<field name="INVESTED" class="java.lang.Integer"/>
	<field name="REMAINING" class="java.lang.Integer"/>
	<variable name="ESTIMATED_1" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{ESTIMATED}]]></variableExpression>
	</variable>
	<variable name="INVESTED_1" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{INVESTED}]]></variableExpression>
	</variable>
	<variable name="REMAINING_1" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{REMAINING}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="79" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="1400" height="79"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" size="24"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Tareas en desarrollo del proyecto"]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<columnHeader>
		<band height="81">
			<textField>
				<reportElement x="153" y="0" width="180" height="32"/>
				<textElement>
					<font fontName="Arial" size="20"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Tabla de valores"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="164" y="61" width="100" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Estimado"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="64" y="61" width="100" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["ID de Tarea"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="364" y="61" width="100" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Faltante"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="264" y="61" width="100" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Invertido"]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<detail>
		<band height="23">
			<textField>
				<reportElement x="264" y="0" width="100" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{INVESTED}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="364" y="0" width="100" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{REMAINING}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="164" y="0" width="100" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{ESTIMATED}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="64" y="0" width="100" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{TASKID}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="586" splitType="Stretch">
			<stackedBarChart>
				<chart>
					<reportElement x="0" y="87" width="1400" height="305"/>
					<chartTitle/>
					<chartSubtitle/>
					<chartLegend/>
				</chart>
				<categoryDataset>
					<categorySeries>
						<seriesExpression><![CDATA["Estimado"]]></seriesExpression>
						<categoryExpression><![CDATA[$F{TASKID}]]></categoryExpression>
						<valueExpression><![CDATA[$F{ESTIMATED}]]></valueExpression>
					</categorySeries>
					<categorySeries>
						<seriesExpression><![CDATA["Invertido"]]></seriesExpression>
						<categoryExpression><![CDATA[$F{TASKID}.toString()]]></categoryExpression>
						<valueExpression><![CDATA[$F{INVESTED}]]></valueExpression>
					</categorySeries>
					<categorySeries>
						<seriesExpression><![CDATA["Faltante"]]></seriesExpression>
						<categoryExpression><![CDATA[$F{TASKID}.toString()]]></categoryExpression>
						<valueExpression><![CDATA[$F{REMAINING}]]></valueExpression>
					</categorySeries>
				</categoryDataset>
				<barPlot>
					<plot labelRotation="90.0"/>
					<itemLabel color="#000000" backgroundColor="#FFFFFF"/>
					<categoryAxisFormat labelRotation="90.0">
						<axisFormat>
							<labelFont/>
							<tickLabelFont/>
						</axisFormat>
					</categoryAxisFormat>
					<valueAxisFormat>
						<axisFormat>
							<labelFont/>
							<tickLabelFont/>
						</axisFormat>
					</valueAxisFormat>
				</barPlot>
			</stackedBarChart>
			<textField>
				<reportElement x="0" y="0" width="1400" height="39"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" size="20"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Gráfica de Tareas en desarrollo del proyecto"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="368" y="524" width="21" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{ESTIMATED_1}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="107" y="442" width="224" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["unidades de tareas en desarrollo"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="51" y="462" width="110" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<text><![CDATA[Se han trabajado]]></text>
			</staticText>
			<staticText>
				<reportElement x="51" y="524" width="144" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<text><![CDATA[Invirtiendo un costo de ]]></text>
			</staticText>
			<textField>
				<reportElement x="195" y="524" width="25" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{REMAINING_1}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="416" y="561" width="27" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{INVESTED_1}+$V{REMAINING_1}-$V{ESTIMATED_1}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="51" y="561" width="110" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<text><![CDATA[Del plan inicial de ]]></text>
			</staticText>
			<textField>
				<reportElement x="51" y="410" width="317" height="32"/>
				<textElement>
					<font fontName="Arial" size="20"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Resumen de tareas en desarrollo"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="192" y="561" width="224" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<text><![CDATA[unidades se incrementó el costo en]]></text>
			</staticText>
			<staticText>
				<reportElement x="389" y="524" width="103" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<text><![CDATA[unidades de PV]]></text>
			</staticText>
			<staticText>
				<reportElement x="220" y="524" width="148" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<text><![CDATA[horas se conseguirá]]></text>
			</staticText>
			<staticText>
				<reportElement x="443" y="561" width="110" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<text><![CDATA[unidades]]></text>
			</staticText>
			<textField>
				<reportElement x="161" y="462" width="139" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{INVESTED_1}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="82" y="442" width="25" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{ESTIMATED_1}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="51" y="442" width="31" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<text><![CDATA[Hay]]></text>
			</staticText>
			<textField>
				<reportElement x="173" y="482" width="135" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{REMAINING_1}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="51" y="482" width="122" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<text><![CDATA[Faltan por trabajar]]></text>
			</staticText>
			<textField>
				<reportElement x="167" y="561" width="25" height="20"/>
				<textElement>
					<font fontName="Arial" size="14"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{ESTIMATED_1}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>